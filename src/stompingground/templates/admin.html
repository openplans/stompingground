{% load jstemplate %}
{% load compress %}
{% load i18n %}
{% load url from future %}
{% load shareabouts_utils %}

<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=IE7">

  <title>{{ config.app.title }} | Admin</title>

  <!-- Favicon & Progressively-Enhanced Touch Icons: http://mathiasbynens.be/notes/touch-icons#sizes -->
  <link rel="shortcut icon" href="{{ STATIC_URL }}css/images/favicon.png">
  <link rel="apple-touch-icon" sizes="144x144" href="{{ STATIC_URL }}css/images/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="114x114" href="{{ STATIC_URL }}css/images/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="{{ STATIC_URL }}css/images/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" href="{{ STATIC_URL }}css/images/apple-touch-icon.png">

  <!-- Legacy HTML5 & Media Queries -->
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
  <![endif]-->

  <link href="{{ STATIC_URL }}lib/bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
  <link href="{{ STATIC_URL }}lib/datatables/datatables-bootstrap.css" rel="stylesheet">
  <link href="{{ STATIC_URL }}css/main.css" rel="stylesheet" media="screen">
  <link href="{{ STATIC_URL }}css/admin.css" rel="stylesheet" media="screen">

  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.css" />
  <!--[if lte IE 8]>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.ie.css" />
  <![endif]-->

  <!-- Google Webfonts -->
  <link href='http://fonts.googleapis.com/css?family=Changa+One:400,400italic' rel='stylesheet' type='text/css'>

</head>
<body>
  <header id="branding" role="banner">
    <hgroup id="site-marquee">
      <h1 id="site-title"><a href="{% url 'dashboard' instance_slug=instance %}">{{config.app.name}}</a></h1>
      <h2 id="site-description">{{config.app.subname}} Admin</h2>
    </hgroup>
  </header>

  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span3">
        <ul class="nav nav-tabs nav-stacked affix span3">
          <li><a href="#maplist">Map List</a></li>
          <li><a href="#heatmap">Heat Map</a></li>
        </ul>
      </div>
      <div class="span9">
        <section id="maplist">
          <h1>Map List</h1>
          <table id="admin-table" class="table table-bordered table-hover"></table>
        </section>

        <section id="heatmap">
          <label class="form-inline pull-right">
            Location Type
            <select id="heatmap-location-type" class="">
              <option value="all">All</option>

            </select>
          </label>
          <h1>Heat Map</h1>
          <div id="adminmap"></div>
        </section>
      </div>
    </div>
  </div>

  <div id="error-modal" class="modal small-modal hide fade">
    <div class="modal-body">
      <strong>That's embarassing.</strong> We weren't able to get the great
      citizen-made maps we wanted to show you.
      Try <a href="/admin/">reloading the page</a>. That usually does the trick.
    </div>
  </div>

  <script>
    var StompingGround = StompingGround || {};
    StompingGround.mapGroup = "{{ instance|default:'default' }}";
    StompingGround.mapRoot = "{% url 'map' instance_slug=instance %}";
    StompingGround.siteRoot = "http://{{ request.get_host }}";
    StompingGround.pathRoot = "{% url 'dashboard' instance_slug=instance %}";

    var Shareabouts = Shareabouts || {}
    Shareabouts.apiRoot = "{% url 'api_proxy' instance_slug=instance path='' %}";
  </script>

  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js "></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
  <script src="{{ STATIC_URL }}lib/bootstrap/js/bootstrap.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/datatables/1.9.4/jquery.dataTables.min.js"></script>
  <script src="{{ STATIC_URL }}lib/datatables/datatables-bootstrap.js"></script>
  <script src="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.js"></script>
  <script src="{{ STATIC_URL }}lib/heatcanvas.js"></script>
  <script src="{{ STATIC_URL }}lib/heatcanvas-worker.js"></script>
  <script src="{{ STATIC_URL }}js/heatmap.min.js"></script>
  <script src="{{ STATIC_URL }}js/utils.min.js"></script>
  <script src="{{ STATIC_URL }}js/{{ instance|default:'' }}config.js"></script>
  <script src="{{ STATIC_URL }}js/models.js"></script>
  <script src="{{ STATIC_URL }}js/admin.js"></script>
</body>
</html>
